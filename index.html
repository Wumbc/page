<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Wumbc</title>
<style>
  html, body {
    height: 100%;
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    color: #fff;
    background: #000;
    overflow: hidden;
  }

  /* Background video */
  #bg {
    position: fixed; inset: 0;
    width: 100%; height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 1.8s ease;
    z-index: 0;
  }
  #bg.show { opacity: 1; }

  /* Overlay */
  .overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.25);
    opacity: 0;
    transition: opacity 1.8s ease;
    z-index: 1;
  }
  .overlay.show { opacity: 1; }

  /* Gate (black start screen) */
  .gate {
    position: fixed; inset: 0;
    display: flex; align-items: center; justify-content: center;
    background: #000;
    z-index: 5;
    transition: opacity 0.6s ease;
  }
  .gate.hide { opacity: 0; pointer-events: none; }

  #enter {
    padding: .9rem 2rem; font-size: 1.1rem;
    color: #fff; background: rgba(255,255,255,.14);
    border: none; border-radius: 10px; cursor: pointer;
    backdrop-filter: blur(4px);
    transition: background .25s ease, transform .08s ease;
  }
  #enter:hover { background: rgba(255,255,255,.26); }
  #enter:active { transform: scale(0.98); }

  /* Email */
  .email {
    position: fixed; top: 18px; right: 18px;
    font-size: 0.95rem; opacity: .6; z-index: 3;
    text-decoration: none; color: #fff; transition: opacity .25s ease;
  }
  .email:hover { opacity: 1; }

  /* Volume UI */
  .vol {
    position: fixed; top: 18px; left: 18px; z-index: 3;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  .vol.show { opacity: 1; }
  .vol .card {
    background: rgba(0,0,0,.55);
    padding: 10px 12px; border-radius: 10px;
    box-shadow: 0 6px 20px rgba(0,0,0,.35);
    backdrop-filter: blur(6px);
  }
  .vol input[type="range"] { width: 140px; }

  @media (prefers-reduced-motion: reduce) {
    #bg, .overlay, .gate { transition: none; }
  }
</style>
</head>
<body>

<!-- Background Video -->
<video id="bg" preload="auto" loop muted playsinline>
  <source src="background.mp4" type="video/mp4" />
</video>

<div class="overlay" id="overlay"></div>

<!-- Email -->
<a class="email" href="mailto:me@wumbc.com">me@wumbc.com</a>

<!-- Volume slider -->
<div class="vol" id="vol">
  <div class="card">
    <input id="volSlider" type="range" min="0" max="100" value="50" />
  </div>
</div>

<!-- Gate screen -->
<div class="gate" id="gate">
  <button id="enter">üêß</button>
</div>

<!-- Hidden YouTube audio -->
<div id="yt-audio" style="width:0;height:0;overflow:hidden;"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player, wantPlay = false;

function onYouTubeIframeAPIReady() {
  player = new YT.Player('yt-audio', {
    height: '0', width: '0',
    videoId: '6jfKibAmR1M',
    playerVars: {
      autoplay: 0, controls: 0, loop: 1, playlist: '6jfKibAmR1M',
      modestbranding: 1, mute: 0
    },
    events: {
      'onReady': () => { if (wantPlay) safePlayAudio(); }
    }
  });
}

const gate = document.getElementById('gate');
const enter = document.getElementById('enter');
const bg = document.getElementById('bg');
const overlay = document.getElementById('overlay');
const vol = document.getElementById('vol');
const volSlider = document.getElementById('volSlider');

let hideTimer;

// Show volume slider with auto-hide
function showVol() {
  vol.classList.add('show');
  clearTimeout(hideTimer);
  hideTimer = setTimeout(() => vol.classList.remove('show'), 3000);
}

// Start experience
enter.addEventListener('click', async () => {
  bg.classList.add('show');
  overlay.classList.add('show');
  gate.classList.add('hide');

  try { await bg.play(); } catch(e) {}
  if (player && player.playVideo) { safePlayAudio(); } else { wantPlay = true; }

  showVol();
});

// Volume control for YouTube audio
volSlider.addEventListener('input', () => {
  const v = parseInt(volSlider.value, 10);
  if (player && player.setVolume) player.setVolume(v);
});

// Re-show volume slider on interaction
document.addEventListener('mousemove', showVol);
document.addEventListener('touchstart', showVol);

function safePlayAudio() {
  try { player.setVolume(parseInt(volSlider.value, 10)); } catch(e) {}
  try { player.playVideo(); } catch(e) {}
}
</script>

</body>
</html>
